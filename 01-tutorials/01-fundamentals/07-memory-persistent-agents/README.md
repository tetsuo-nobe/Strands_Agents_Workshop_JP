# メモリ永続エージェント

このチュートリアルでは、永続メモリを活用して複数のインタラクションにわたって情報を記憶できるStrandsエージェントの構築方法を説明します。メモリ永続性により、エージェントは再起動後でもコンテキストを維持し、以前の会話の情報を思い出すことができます。

## 主要な概念

- **エージェントメモリ**: エージェントが以前の会話の情報を保存および呼び出すことを可能にします
- **永続性**: エージェントを再起動した後も情報は利用可能です
- **ベクターストレージ**: ベクター埋め込みを使用して、意味的に類似した情報を保存および取得します
- **実装**: [mem0.ai](https://mem0.ai) の `mem0_memory` ツールを使用します

## メモリバックエンドのオプション

このチュートリアルでは、3つの異なるメモリバックエンド構成をサポートしています。

1. **OpenSearch Serverless** (AWS 環境に推奨):
- ベクターストレージ用のフルマネージド AWS サービス
- AWS の認証情報と権限が必要です
- 提供されているスクリプトで自動的にデプロイされます

2. **FAISS** (ローカル開発のデフォルト):
- 外部サービスを必要としないローカルベクターストア
- 開発とテストに適しています
- プロセス終了時にメモリが失われます

3. **Mem0 プラットフォーム**:
- クラウドベースのメモリサービス[mem0.ai](https://mem0.ai)
- Mem0 APIキーが必要です
- 設定の詳細についてはノートブックをご覧ください

## ユースケース

- ユーザーの好みを記憶するパーソナルアシスタント
- 会話のコンテキストを維持するカスタマーサポートボット
- 学習の進捗状況を追跡する教育エージェント
- 企業固有の情報を呼び出すエンタープライズアシスタント
- 会話履歴が付加価値となるあらゆるアプリケーション

## はじめに

### 前提条件
- Python 3.10以上
- 適切な権限を持つAWSアカウント（OpenSearchオプション用）
- Amazon BedrockでAnthropic Claudeモデルが有効化されていること

### オプション1：インタラクティブノートブック
Strandsエージェントによるメモリの概念と実装を理解するために、付属のJupyterノートブックを実行してください：`./personal_agent_with_memory.ipynb`

### オプション2：コマンドラインデモ
インタラクティブなチャット体験のために：

1. 依存関係をインストールします：
```
pip install -r requirements.txt
```

2. OpenSearch サーバーレスリソース:
```
sh prereqs/deploy_OSS.sh
```

3. エージェントを起動します:
```
python personal_agent_with_memory.py
```

4. エージェントに質問したり情報を提供したりして対話します:
- 「私はコーヒーよりも紅茶が好きです」と試してみましょう。
- その後、「私は何を飲むのが好きですか？」と尋ねます。
- 「memory」と発声すると、保存されているすべてのメモリが一覧表示されます。

5. 完了したら、OpenSearch リソースを削除します。
```
sh prereqs/cleanup_OSS.sh
```

## メモリ操作

エージェントは、3つの主要なメモリ操作をサポートしています。

- **store**: 重要な情報を後から取得するために保存する
- **retrieve**: クエリに基づいて関連するメモリにアクセスする
- **list**: 保存されているすべてのメモリを表示する

## 実験のアイデア

- エージェントに個人的な情報を伝え、後の会話で思い出せるかを確認する
- 対話の合間にエージェントを再起動して、メモリの永続性をテストする
- 非永続的なエージェントと比較して、ユーザーエクスペリエンスの違いを確認する
- さまざまな種類の情報を試して、エージェントが最もよく記憶しているものを確認する
- エージェントがメモリを使用して、よりパーソナライズされた応答を提供する方法を調べる

## アーキテクチャ

このチュートリアルでは、2つのアーキテクチャの例を示します。

1. **OpenSearch Serverless**: 本番環境向けのAWS管理ベクターデータベース
2. **Mem0 Platform**: シンプルなデプロイメントのためのクラウドベースのメモリサービス

参照アーキテクチャ図と詳細な説明が記載されたノートブック。
